"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[477],{10:e=>{e.exports=JSON.parse('{"blogPosts":[{"id":"change-ssh-port-in-linux-centos","metadata":{"permalink":"/blog/change-ssh-port-in-linux-centos","editUrl":"https://github.com/jhasuraj01/blog/tree/main/blog/2022-12-08-change-ssh-port-in-linux-centos.mdx","source":"@site/blog/2022-12-08-change-ssh-port-in-linux-centos.mdx","title":"Change SSH Port in Linux CentOS (Oracle Linux 8)","description":"On Linux systems, the default SSH port is 22. There are a few reasons","date":"2022-12-08T00:00:00.000Z","formattedDate":"December 8, 2022","tags":[{"label":"linux","permalink":"/blog/tags/linux"},{"label":"ssh","permalink":"/blog/tags/ssh"},{"label":"firewalld","permalink":"/blog/tags/firewalld"},{"label":"semanage","permalink":"/blog/tags/semanage"}],"readingTime":1.38,"hasTruncateMarker":true,"authors":[{"name":"Suraj Jha","title":"Educator @CodeChef | IT\'24 | 4\u2b50 @CodeChef | Knight @Leetcode","url":"https://github.com/jhasuraj01","imageURL":"https://github.com/jhasuraj01.png","key":"jhasuraj01"}],"frontMatter":{"slug":"change-ssh-port-in-linux-centos","title":"Change SSH Port in Linux CentOS (Oracle Linux 8)","authors":["jhasuraj01"],"tags":["linux","ssh","firewalld","semanage"]}},"content":"On Linux systems, the default SSH port is 22. There are a few reasons\\nwhy you might want to change this number. This article will walk you\\nthrough the process of changing the default ssh port 22 to 8080.\\n\\n\x3c!--truncate--\x3e\\n\\n## Prerequisite\\n- If you are using oracle cloud, open port 8080 in Oracle Cloud Security list for SSH Access.\\n\\n## Setup VM Firewall\\n\\nCheck firewall state\\n```bash\\nsudo firewall-cmd --state\\n```\\n\\nLogin as root user\\n```bash\\nsudo su root\\n```\\n\\nUpdate Port 22 to 8080\\n```bash\\nvi /usr/lib/firewalld/services/ssh.xml\\n```\\n\\n```output title=\'~/usr/lib/firewalld/services/ssh.xml\'\\n<?xml version=\\"1.0\\" encoding=\\"utf-8\\"?>\\n<service>\\n  <short>SSH</short>\\n  <description>Secure Shell (SSH) is a protocol ... to be useful.</description>\\n  \x3c!-- highlight-next-line --\x3e\\n  <port protocol=\\"tcp\\" port=\\"53\\"/>\\n</service>\\n```\\n\\nReload firewall and network\\n```bash\\ncp /usr/lib/firewalld/services/ssh.xml /etc/firewalld/services/ssh.xml\\nfirewall-cmd --reload\\nsystemctl restart network\\nsystemctl reload firewalld\\n```\\n\\n## SSH Configuration\\n\\nSet port 8080 as ssh port\\n```bash\\nsemanage port -m -t ssh_port_t -p tcp 8080\\n```\\n\\nUpdate ssh port 22 to 8080\\n```bash\\nvi /etc/ssh/sshd_config\\n```\\n\\n```output title=\'~/etc/ssh/sshd_config\'\\n...\\n# If you want to change the port on a SELinux system, you have to tell\\n# SELinux about this change.\\n# semanage port -a -t ssh_port_t -p tcp #PORTNUMBER\\n# highlight-next-line\\nPort 53\\n#AddressFamily any\\n#ListenAddress 0.0.0.0\\n#ListenAddress ::\\n\\nHostKey /etc/ssh/ssh_host_rsa_key\\n...\\n```\\n\\nRestart ssh daemon\\n```bash\\nsystemctl restart sshd\\n```\\n\\n## Testing\\n\\nOpen another terminal and try to ssh through new port\\n```bash\\nssh -i \\"PATH_TO_SSH_KEY\\" -p 8080 USERNAME@IP_ADDRESS -p 8080\\n```\\n\\n## References\\n- [How to set up a firewall using firewalld on centos 7](https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-using-firewalld-on-centos-7)\\n- [Changing the default ssh port](https://www.ionos.com/help/server-cloud-infrastructure/getting-started/important-security-information-for-your-server/changing-the-default-ssh-port/)\\n- [SSH fails after port change on centos 7](https://serverfault.com/questions/834195/ssh-fails-after-port-change-on-centos-7)\\n- [Selinux error valueerror port tcp 5000 already defined](https://serverfault.com/questions/790404/selinux-error-valueerror-port-tcp-5000-already-defined)"}]}')}}]);